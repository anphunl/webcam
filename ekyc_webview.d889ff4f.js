parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ezUk":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,r){function o(e){try{s(a.next(e))}catch(t){r(t)}}function c(e){try{s(a.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,c)}s((a=a.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,a,i,r,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(c){r=[6,c],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.FaceSDK=void 0;var n="opencv.js",a=function(){return function(){var a=this;this.cap=null,this.canvasWidth=1280,this.canvasHeight=720,this.setCanvasSize=function(e,t){a.canvasHeight=t,a.canvasWidth=e},this.loadOpencv=function(e){var t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("type","text/javascript"),t.addEventListener("load",function(){cv.getBuildInformation?e():cv.onRuntimeInitialized=function(){e()}}),t.addEventListener("error",function(){console.error("Failed to load "+n)}),t.src=n;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},this.startCamera=function(e,t,n){var i=a,r=document.getElementById(t);r||(r=document.createElement("video"));var o={qvga:{width:{exact:320},height:{exact:240}},vga:{width:{exact:640},height:{exact:480}},hd:{width:{exact:1280},height:{exact:720}},hdiv:{width:{exact:720},height:{exact:1280}},fullhd:{width:{exact:1920},height:{exact:1080}}}[e];o||(o=!0),navigator.mediaDevices.getUserMedia({video:o,audio:!1}).then(function(e){r.srcObject=e,r.play(),i.video=r,i.stream=e,i.onCameraStartedCallback=n,i.cap=new cv.VideoCapture(i.video),r.addEventListener("canplay",i.onVideoCanPlay,!1)}).catch(function(e){console.error("Camera Error: "+e.name+" "+e.message)})},this.onVideoCanPlay=function(){a.onCameraStartedCallback&&a.onCameraStartedCallback(a.stream,a.video)},this.captureImage=function(){var e=new cv.Mat(a.video.height,a.video.width,cv.CV_8UC4);return a.cap.read(e),e},this.handleVideo=function(){var n=a,i=new cv.Mat(a.video.height,a.video.width,cv.CV_8UC4),r=new cv.Mat;new cv.Mat,setTimeout(function o(){return e(a,void 0,void 0,function(){var e;return t(this,function(t){try{n.cap.read(i),e=new cv.Size(n.canvasWidth,n.canvasHeight),cv.resize(i,r,e,0,0,cv.INTER_AREA),cv.imshow("canvasOutput",r),setTimeout(o,0)}catch(a){console.error(a)}return[2]})})},0)},this.stopCamera=function(){a.video&&(a.video.pause(),a.video.srcObject=null,a.video.removeEventListener("canplay",a.onVideoCanPlay)),a.stream&&a.stream.getVideoTracks()[0].stop()}}}();exports.FaceSDK=a;
},{}],"YsFY":[function(require,module,exports) {
var global = arguments[3];
var define;
var t,r=arguments[3];!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(r):"function"==typeof t&&t.amd?t(e):e(r)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:this,function(r){"use strict";var e,n=(r=r||{}).Base64,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=function(t){for(var r={},e=0,n=t.length;e<n;e++)r[t.charAt(e)]=e;return r}(o),c=String.fromCharCode,u=function(t){if(t.length<2)return(r=t.charCodeAt(0))<128?t:r<2048?c(192|r>>>6)+c(128|63&r):c(224|r>>>12&15)+c(128|r>>>6&63)+c(128|63&r);var r=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return c(240|r>>>18&7)+c(128|r>>>12&63)+c(128|r>>>6&63)+c(128|63&r)},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=function(t){return t.replace(i,u)},d=function(t){var r=[0,2,1][t.length%3],e=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0);return[o.charAt(e>>>18),o.charAt(e>>>12&63),r>=2?"=":o.charAt(e>>>6&63),r>=1?"=":o.charAt(63&e)].join("")},h=r.btoa&&"function"==typeof r.btoa?function(t){return r.btoa(t)}:function(t){if(t.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return t.replace(/[\s\S]{1,3}/g,d)},s=function(t){return h(f(String(t)))},A=function(t){return t.replace(/[+\/]/g,function(t){return"+"==t?"-":"_"}).replace(/=/g,"")},p=function(t,r){return r?A(s(t)):s(t)};r.Uint8Array&&(e=function(t,r){for(var e="",n=0,a=t.length;n<a;n+=3){var c=t[n],u=t[n+1],i=t[n+2],f=c<<16|u<<8|i;e+=o.charAt(f>>>18)+o.charAt(f>>>12&63)+(void 0!==u?o.charAt(f>>>6&63):"=")+(void 0!==i?o.charAt(63&f):"=")}return r?A(e):e});var l,g=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,y=function(t){switch(t.length){case 4:var r=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return c(55296+(r>>>10))+c(56320+(1023&r));case 3:return c((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return c((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},x=function(t){return t.replace(g,y)},B=function(t){var r=t.length,e=r%4,n=(r>0?a[t.charAt(0)]<<18:0)|(r>1?a[t.charAt(1)]<<12:0)|(r>2?a[t.charAt(2)]<<6:0)|(r>3?a[t.charAt(3)]:0),o=[c(n>>>16),c(n>>>8&255),c(255&n)];return o.length-=[0,0,2,1][e],o.join("")},C=r.atob&&"function"==typeof r.atob?function(t){return r.atob(t)}:function(t){return t.replace(/\S{1,4}/g,B)},b=function(t){return C(String(t).replace(/[^A-Za-z0-9\+\/]/g,""))},v=function(t){return String(t).replace(/[-_]/g,function(t){return"-"==t?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,"")},F=function(t){return function(t){return x(C(t))}(v(t))};r.Uint8Array&&(l=function(t){return Uint8Array.from(b(v(t)),function(t){return t.charCodeAt(0)})});if(r.Base64={VERSION:"2.6.4",atob:b,btoa:h,fromBase64:F,toBase64:p,utob:f,encode:p,encodeURI:function(t){return p(t,!0)},btou:x,decode:F,noConflict:function(){var t=r.Base64;return r.Base64=n,t},fromUint8Array:e,toUint8Array:l},"function"==typeof Object.defineProperty){var m=function(t){return{value:t,enumerable:!1,writable:!0,configurable:!0}};r.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",m(function(){return F(this)})),Object.defineProperty(String.prototype,"toBase64",m(function(t){return p(this,t)})),Object.defineProperty(String.prototype,"toBase64URI",m(function(){return p(this,!0)}))}}return r.Meteor&&(Base64=r.Base64),"undefined"!=typeof module&&module.exports?module.exports.Base64=r.Base64:"function"==typeof t&&t.amd&&t([],function(){return r.Base64}),{Base64:r.Base64}});
},{}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(a,i){function o(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}c((r=r.apply(e,t||[])).next())})},t=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(s){i=[6,s],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(exports,"__esModule",{value:!0});var n=require("./facesdk"),r=require("js-base64");e(void 0,void 0,void 0,function(){function a(){var e=Math.min(window.innerWidth,1280),t=Math.floor(720*e/1280),n=document.getElementById("img_face_frame"),r=document.getElementById("img_id_frame");n.style.width=Math.floor(e/1280*450),n.style.left=Math.floor(e/1280*415),r.style.width=Math.floor(e/1280*350),r.style.top=Math.floor(e/1280*465),r.style.left=Math.floor(e/1280*465),i.setCanvasSize(e,t)}var i;return t(this,function(o){return(i=new n.FaceSDK).loadOpencv(function(){i.startCamera("hd","videoInput",function(){var n=document.getElementById("btnCapture");n.disabled=!1,n.addEventListener("click",function(n){return function(){return e(this,void 0,void 0,function(){var e,n,a,o;return t(this,function(t){switch(t.label){case 0:return(e=document.getElementById("btnCapture")).disabled=!0,(n=document.getElementById("overlay")).classList.remove("hide"),a=i.captureImage(),[4,fetch("https://ekyc.ai-studio-work.net/api/wv_compute_matching_score_two_faces",{method:"POST",headers:{ContentType:"application/json"},body:JSON.stringify({width:a.size().width,height:a.size().height,image:r.Base64.fromUint8Array(a.data),user_id:Math.floor(Date.now()/500)-3205503e3})})];case 1:return[4,t.sent().json()];case 2:return o=t.sent(),console.log(JSON.stringify(o)),n.classList.add("hide"),"status"in o?0==o.status?alert("2 faces are "+(100*o.rate).toFixed(2)+"% matched."):alert("Image must contain 2 faces"):alert(o.message),a.delete(),e.disabled=!1,[2]}})})}()}),a(),window.onresize=a,document.getElementById("img_face_frame").hidden=!1,document.getElementById("img_id_frame").hidden=!1})}),[2]})});
},{"./facesdk":"ezUk","js-base64":"YsFY"}]},{},["QCba"], null)
//# sourceMappingURL=ekyc_webview.d889ff4f.js.map